<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propositional Logic Proof Checker</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- <div id="outer-container"> -->
        <header>
            <h1>Wff Helper</h1>
        </header>
        <div id="container">
            <div id="proof-container">
                <!-- <h2>Proof</h2> -->
                <div id="steps-container">
                    <table id="steps-table">
                        <tr>
                            <td>(a v b)</td>
                            <td class="steps-justification">Assumption</td>
                        </tr>
                        <tr>
                            <td>(b v a)</td>
                            <td class="steps-justification">1, E10</td>
                        </tr>
                        <tr>
                            <td>((a v b) ^ (b v a))</td>
                            <td class="steps-justification">1, E10</td>
                        </tr>
                        

                        
                    </table> 
                </div>
                <div id="input-container">
                    <input type="text" id="input-entry" placeholder="Enter next step..." accept="">
                    <button id="check-step" onclick="addStep()">Check Step</button>
                </div>
            </div>
            <div id="resource-container">
                <!-- <h2>Resources</h2> -->
                <div class="resource">
                    <h3>Equivalence Rules</h3>
                    <div class="table-container">
                        <table id="equivalence-rules"></table> 
                    </div>
                </div>
                <div class="resource">
                    <h3>Inference Rules</h3>
                    <div class="table-container">
                        <table id="inference-rules"></table> 
                    </div>
                </div>
            </div>
        </div>
    <!-- </div> -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
        fetch("rules.json")
            .then(response => response.json())
            .then(data => populateRules(data))
            .catch(error => console.error("Error loading the JSON file:", error));
        });

        document.getElementById("input-step").addEventListener("keypress", function(event) {
            // If the user presses the "Enter" key on the keyboard
            if (event.key === "Enter") {
                // Cancel the default action, if needed
                event.preventDefault();
                // Trigger the button element with a click
                document.getElementById("check-step").click();
            }
        });

        // Populates the equivalence and inference rules
        function populateRules(data) {
            var equivalence_table = document.getElementById("equivalence-rules");
            data["equivalence_rules"].forEach(rule => {
                var tr = document.createElement("tr");
                tr.innerHTML = "<td>" + rule.name + "</td>" +
                    "<td>" + rule.lhs + " â‰¡ " + rule.rhs + "</td>"
                equivalence_table.appendChild(tr);
            });

            var inference_table = document.getElementById("inference-rules");
            data["inference_rules"].forEach(rule => {
                var tr = document.createElement("tr");
                tr.innerHTML = "<td>" + rule.name + "</td>" +
                    "<td><div class='fraction'><div class='numerator'>" + rule.conditions + "</div><div class='denominator'>" + rule.result + "</div></div></td>"
                inference_table.appendChild(tr);
            });
        }

        function addStep() {
            

            var steps_table = document.getElementById("steps-table");
            var tr = document.createElement("tr");
            // tr.innerHTML = "<td>(a v b)</td><td class="steps-justification">Assumption</td>"
            tr.innerHTML = "<td>" + input + "</td>";
            steps_table.appendChild(tr);
        }
    </script>
</body>
</html>
